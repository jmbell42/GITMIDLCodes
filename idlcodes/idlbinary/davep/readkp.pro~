pro readkp,year,kp,rtime
file = '~/Indices/Kp/'+tostr(year)

nlines = file_lines(file)
itime = intarr(6,nlines*8)
rtime = dblarr(nlines*8)
kp = fltarr(nlines*8)
temp = ''

close,5
openr,5,file
il = 0
for iline = 0, nlines-1 do begin
    readf,5,temp

        itime(0,il:il+7) = fix(strmid(temp,0,4))
        itime(1,il:il+7) = fix(strmid(temp,4,2))
        itime(2,il:il+7) = fix(strmid(temp,6,2))

       for i = 0, 7 do begin
           
           itime(3,il) = i*3
           
           if i eq 0 then val = strmid(temp,9,2)
           if i eq 1 then val = strmid(temp,11,2)
           if i eq 2 then val = strmid(temp,13,2)
           if i eq 3 then val = strmid(temp,15,2)
           if i eq 4 then val = strmid(temp,17,2)
           if i eq 5 then val = strmid(temp,19,2)
           if i eq 6 then val = strmid(temp,21,2)
           if i eq 7 then val = strmid(temp,23,2)

           case strmid(val,1) of
               '+': value = fix(strmid(val,0,1))+.3
               '-': value = fix(strmid(val,0,1))-.3
               ' ': value = fix(strmid(val,0,1))
           endcase

           kp(il) = value
           c_a_to_r,itime(*,il),rt
           rtime(il) = rt
           il = il + 1
    endfor
    

  
endfor

close,5


end
